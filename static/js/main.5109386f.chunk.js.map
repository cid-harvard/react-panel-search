{"version":3,"sources":["../../src/components/Root.tsx","../../src/components/StandardSearch.tsx","../../src/index.tsx","App.tsx","index.tsx"],"names":["SearchContainer","styled","SearchIcon","SearchBar","magnifyingGlassSize","$hasSelection","DropDownIcon","ClearButton","StandardSearch","props","setIsOpen","previousPlaceholder","usePrevious","searchEl","useRef","clearEl","dropdownEl","onChange","debounce","setSearchQuery","neverEmpty","useEffect","node","initialQuery","hasSelection","placeholder","focusOnRender","className","dangerouslySetInnerHTML","__html","ref","type","autoComplete","onKeyDown","handleKeyDown","onFocus","style","display","marginRight","undefined","onClick","onClear","transform","isOpen","e","document","chevronSVG","Container","SearchResults","TitleOuter","BreadCrumbOuter","Title","NavButton","NextButton","TraverseOnlyButton","PanelItem","ButtonBase","NoResults","PanelButton","SearchButton","Direction","onClose","initialSelectedValue","levels","i","disallowSelectionLevels","l","previousSelectedValue","useState","level","parent","selected","searchQuery","highlightedIndex","updateState","newState","setState","selectDatum","value","onSelect","selectedValue","closeDropdown","current","rootRef","preventClickFromPropagating","state","el","resultsRef","closeOnEsc","focusedElement","liElms","Array","li","index","Math","highlightedTop","highlightedBottom","containerScrollTop","firstRender","onMouseLeave","onHover","filteredElms","renderedIds","data","topLevelItems","sortBy","datum","matchingKeywords","k","nonMatchingKeywords","keywordMatch","keywordResultElm","matchingKeywordFormatter","maxResults","childList","childElms","getChildren","elms","child","depth","onMouseEnter","resultElm","targetIndex","onTraverseLevel","paddingLeft","paddingRight","resultsIdentation","key","id","target","noResultsText","noResultsFoundFormatter","React","listOutput","listItems","parent_id","d","onContinue","ArrowButton","continueButton","count","showCount","items","topLevelListItems","parentDatum","titleText","topLevelTitle","breadCrumb","searchResults","selectedClass","zIndex","defaultPlaceholderText","val","newSelected","highlightedElm","focusedInput","title","sortedLevels","Root","div","PageTitle","h1","button","rawData","JSON","parse","App","setSelectedValue","map","keywords","push","naics_id","selectedText","clearButton","floor","random","length","match","rest","join","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.5109386f.chunk.js","sourcesContent":["import React, {useState, useEffect, useRef} from 'react';\nimport {Level, Datum} from '../'\nimport StandardSearch from './StandardSearch';\nimport sortBy from 'lodash/sortBy';\nimport {usePrevious} from 'react-use';\nimport styled from 'styled-components/macro';\nimport raw from 'raw.macro';\n\nconst chevronSVG = raw('../assets/chevron.svg');\n\nconst Container = styled.div`\n  position: relative;\n  width: 100%;\n  color: #333;\n\n  ul {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n  }\n\n  li {\n    li {\n      button:before {\n        content: '↳';\n        margin-right: 0.5rem;\n      }\n    }\n  }\n\n  .react-panel-search-highlighted-item {\n    background-color: #f3f3f3;\n  }\n\n  &.react-panel-search-has-selection {\n    input::placeholder {\n      opacity: 1;\n    }\n  }\n`;\n\nconst SearchBar = styled.div`\n  position: relative;\n`;\n\nconst SearchResults = styled.div`\n  position: absolute;\n  width: 100%;\n  box-sizing: border-box;\n  max-height: 300px;\n  overflow: auto;\n  background-color: #fff;\n\n  &:hover {\n    .react-panel-search-highlighted-item:not(:hover) {\n      background-color: #fff;\n    }\n  }\n\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n    width: 7px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, .3);\n  }\n  ::-webkit-scrollbar-track {\n    background-color: rgba(0, 0, 0, .1);\n  }\n`;\n\nconst TitleOuter = styled.div`\n  font-weight: 600;\n  padding: 0.25rem 1.75rem 0.6rem;\n  text-transform: uppercase;\n  color: #444;\n  font-size: 0.85rem;\n`;\n\nconst BreadCrumbOuter = styled(TitleOuter)`\n  &:hover {\n    cursor: pointer;\n    background-color: #f3f3f3;\n  }\n`;\n\nconst Title = styled.div`\n  display: grid;\n  grid-column-gap: 0.5rem;\n  grid-template-columns: auto 1fr;\n  padding: 0.35rem 0;\n  border-bottom: solid 1px gray;\n`;\n\nconst NavButton = styled.button`\n  border: none;\n  outline: none;\n  display: flex;\n  justify-content: center;\n  height: 100%;\n  width: 1.4rem;\n  padding: 0.25rem;\n  background-color: transparent;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    background-color: #f3f3f3;\n  }\n\n  svg {\n    width: 100%;\n    height: 100%;\n    transform: rotate(90deg);\n\n    polyline {\n      stroke: gray;\n      stroke-width: 0.75px;\n    }\n  }\n`;\n\nconst NextButton = styled(NavButton)`\n  grid-row: 1;\n  grid-column: 2;\n  position: relative;\n  padding: 0 0.25rem;\n  height: 1.5rem;\n  background-color: #fff;\n  margin: auto 1.75rem auto 0.75rem;\n\n  &:hover {\n    cursor: pointer;\n    background-color: #f3f3f3;\n  }\n\n  svg {\n    transform: rotate(-90deg);\n  }\n`;\n\nconst TraverseOnlyButton = styled(NextButton)`\n  background-color: transparent;\n  pointer-events: none;\n`;\n\nconst PanelItem = styled.li`\n  display: grid;\n  grid-template-columns: 1fr auto;\n`;\n\nconst ButtonBase = styled.button`\n  padding: 0.75rem 4rem 0.75rem 2rem;\n  font-size: 0.8rem;\n  background-color: #fff;\n  border: none;\n  outline: none;\n  display: block;\n  width: 100%;\n  text-align: left;\n  box-sizing: border-box;\n\n  &:hover, &:focus {\n    cursor: pointer;\n    background-color: #f3f3f3;\n  }\n`;\n\nconst NoResults = styled.div`\n  padding: 0.75rem 4rem 0.75rem 2rem;\n  font-size: 0.8rem;\n`;\n\nconst PanelButton = styled(ButtonBase)`\n  grid-row: 1;\n  grid-column: 1 / 3;\n`;\n\nconst SearchButton = styled(ButtonBase)`\n  padding: 0.6rem 0.75rem\n`;\n\nexport enum Direction {\n  asc = 'asc',\n  desc = 'desc',\n}\n\ninterface Props {\n  levels: Level[];\n  topLevelItems: Datum[];\n  onSelect: undefined | ((value: Datum | null) => void);\n  onTraverseLevel: undefined | ((value: Datum, direction: Direction) => void);\n  onHover: undefined | ((value: Datum | null) => void);\n  selectedValue: Datum | null;\n  topLevelTitle: string | undefined;\n  disallowSelectionLevels: undefined | (Level['level'][]);\n  defaultPlaceholderText: string;\n  showCount: boolean;\n  resultsIdentation: number;\n  neverEmpty: boolean;\n  maxResults: number | null;\n  focusOnRender: boolean;\n  noResultsFoundFormatter: undefined | ((value: string) => React.ReactNode);\n  matchingKeywordFormatter: undefined | ((matched: string[], rest: string[]) => React.ReactNode);\n  onClose: () => void;\n}\n\ninterface State {\n  level: Datum['level'];\n  parent: Datum['parent_id'];\n  selected: Datum | null;\n  searchQuery: string;\n  highlightedIndex: number;\n  isOpen: boolean;\n}\n\nexport default (props: Props) => {\n  const {\n    levels, onSelect, selectedValue, topLevelTitle, disallowSelectionLevels,\n    onTraverseLevel, onHover, defaultPlaceholderText, showCount, resultsIdentation,\n    neverEmpty, maxResults, focusOnRender, noResultsFoundFormatter, topLevelItems,\n    matchingKeywordFormatter, onClose,\n  } = props;\n\n  let initialSelectedValue: Datum | null = selectedValue;\n  if (neverEmpty) {\n    if (levels.length && initialSelectedValue === null) {\n      let i = 0;\n      do {\n        if (!disallowSelectionLevels || (\n          !disallowSelectionLevels.find(l => l === levels[i].level))\n          && levels[i].data.length\n        ) {\n          initialSelectedValue = levels[i].data[0];\n          break;\n        }\n        i++;\n      }\n      while (i < levels.length)\n    }\n  }\n\n  const previousSelectedValue = usePrevious(selectedValue);\n\n  const [state, setState] = useState<State>({\n    level: levels[0].level,\n    parent: null,\n    selected: initialSelectedValue,\n    searchQuery: '',\n    highlightedIndex: 0,\n    isOpen: false,\n  });\n\n  const updateState = (newState: State) => {\n    setState(newState)\n  }\n\n  const clearSearch = () => {\n    const newSelected = neverEmpty ? state.selected : null;\n    updateState({\n      level: levels[0].level,\n      parent: null,\n      selected: newSelected,\n      searchQuery: '',\n      highlightedIndex: 0,\n      isOpen: true,\n    })\n    if (onSelect) {\n      onSelect(newSelected);\n    }\n  }\n\n  const selectDatum = (value: Datum) => {\n    updateState({...state, selected: value, isOpen: false, searchQuery: ''})\n    if (onSelect) {\n      onSelect(value);\n    }\n  }\n\n  useEffect(() => {\n    if (previousSelectedValue && !selectedValue && !neverEmpty) {\n      updateState({...state, selected: null, searchQuery: ''})\n    } else if (selectedValue) {\n      updateState({...state, selected: selectedValue})\n    }\n  }, [selectedValue, previousSelectedValue]);\n\n  const closeDropdown = () => setState(current => ({...current, highlightedIndex: 0, isOpen: false}));\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  useEffect(() => {\n    let el: HTMLDivElement;\n    const preventClickFromPropagating = (e: MouseEvent) => {\n      if (state.isOpen) {\n        e.stopPropagation();\n      }\n    };\n    if (rootRef.current !== null) {\n      el = rootRef.current;\n      el.addEventListener('mousedown', preventClickFromPropagating);\n    }\n\n    document.addEventListener('mousedown', closeDropdown);\n    return () => {\n      document.removeEventListener('mousedown', closeDropdown);\n      if (el) {\n        el.removeEventListener('mousedown', preventClickFromPropagating);\n      }\n    };\n  }, [rootRef, closeDropdown]);\n\n  const resultsRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    const closeOnEsc = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        closeDropdown();\n        const focusedElement = document.activeElement as HTMLElement;\n        if (focusedElement) {\n          focusedElement.blur();\n        }\n      }\n    }\n    const node = resultsRef.current;\n    if (node) {\n      const liElms = Array.from(node.querySelectorAll<HTMLButtonElement>('li .react-panel-search-list-item'));\n      for (let li of liElms) {\n        li.classList.remove('react-panel-search-highlighted-item')\n      }\n      if (liElms.length) {\n        let index: number;\n        if (state.highlightedIndex >= liElms.length) {\n          index = Math.abs(state.highlightedIndex - liElms.length)\n          updateState({...state, highlightedIndex: 0})\n        } else if (state.highlightedIndex < 0) {\n          index = liElms.length + state.highlightedIndex;\n          updateState({...state, highlightedIndex: liElms.length - 1})\n        } else {\n          index = state.highlightedIndex;\n        }\n        liElms[index].classList.add('react-panel-search-highlighted-item');\n        const highlightedTop = liElms[index].offsetTop;\n        const highlightedBottom = highlightedTop + liElms[index].offsetHeight;\n\n        const containerScrollTop = node.scrollTop;\n        const containerScrollBottom = containerScrollTop + node.offsetHeight;\n\n        if (highlightedBottom > containerScrollBottom) {\n          node.scrollTop = highlightedBottom - node.offsetHeight;\n        } else if (highlightedTop < liElms[index].offsetHeight) {\n          node.scrollTop = 0;\n        } else if (highlightedTop < containerScrollTop) {\n          node.scrollTop = highlightedTop;\n        }\n      }\n      document.addEventListener('keydown', closeOnEsc);\n    }\n    return () => {\n      document.removeEventListener('keydown', closeOnEsc);\n    }\n\n  }, [state, resultsRef, closeDropdown]);\n\n  const firstRender = useRef(true);\n  useEffect(() => {\n    if (firstRender.current) {\n     firstRender.current = false; \n    } else {\n      if (!state.isOpen) {\n        onClose();\n      }\n    }\n  }, [state.isOpen, onClose, firstRender])\n\n\n  const onMouseLeave = () => {\n    if (onHover) {\n      onHover(null);\n    }\n  }\n\n  let listOutput: React.ReactElement<any>;\n\n  if (state.searchQuery.length) {\n    // Loop through each filtered level to make element list\n    // For each parent, find the children in the next level down if not the last level\n    // For each level, check if a parent exists, if so skip it\n    const filteredElms: React.ReactElement<any>[] = [];\n    const renderedIds: Array<string | number> = [];\n    const getChildren = (index: number, parent: Datum['parent_id'], depth: number) => {\n      const elms: React.ReactElement<any>[] = [];\n      sortBy(levels[index].data, ['name']).forEach((child) => {\n        if (!maxResults || renderedIds.length < maxResults) {\n          let keywordMatch: boolean;\n          let keywordResultElm: React.ReactNode | null;\n          if (child.keywords && child.keywords.length) {\n            const matchingKeywords = child.keywords.filter(k => k.toLowerCase().includes(state.searchQuery.toLowerCase()));\n            const nonMatchingKeywords = child.keywords.filter(k => !k.toLowerCase().includes(state.searchQuery.toLowerCase()));\n            keywordMatch = matchingKeywords.length !== 0;\n            keywordResultElm = matchingKeywordFormatter\n              ? matchingKeywordFormatter(matchingKeywords, nonMatchingKeywords) : null;\n          } else {\n            keywordMatch = false;\n            keywordResultElm = null;\n          }\n          if (child.parent_id === parent &&\n              !renderedIds.includes(child.id) &&\n              (child.title.toLowerCase().includes(state.searchQuery.toLowerCase()) || keywordMatch)\n            ) {\n            renderedIds.push(child.id);\n            let childElms: React.ReactElement<any>[] | null;\n            if (levels[index + 1] && levels[index + 1].data) {\n              childElms = getChildren(index + 1, child.id, depth + 1);\n            } else {\n              childElms = null;\n            }\n            const childList = childElms && childElms.length ? (\n              <ul\n                className={'react-panel-search-list-inner-container'}\n              >\n                {childElms}\n              </ul>\n            ) : null;\n            const onContinue = () => {\n              const targetIndex = levels.findIndex(({level}) => level === child.level);\n              updateState({\n                ...state, level: levels[targetIndex + 1].level, parent: child.id, \n                highlightedIndex: 0, selected: null, searchQuery: '',\n              })\n              if (onTraverseLevel !== undefined) {\n                onTraverseLevel(child, Direction.desc);\n              }\n            }\n            const onSearch = () => {\n              selectDatum(child)\n            }\n            const onMouseEnter = () => {\n              if (onHover) {\n                onHover(child);\n              }\n            }\n            const resultElm = disallowSelectionLevels && disallowSelectionLevels.includes(levels[index].level) ? (\n              <SearchButton\n                onClick={onContinue}\n                onMouseEnter={onMouseEnter}\n                onMouseLeave={onMouseLeave}\n                className={'react-panel-search-list-item traverse-only'}\n                style={{paddingLeft: (depth * resultsIdentation) + 'rem', paddingRight: resultsIdentation + 'rem'}}\n              >\n                {child.title}\n                {keywordResultElm}\n              </SearchButton>\n            ) : (\n              <SearchButton\n                onClick={onSearch}\n                onMouseEnter={onMouseEnter}\n                onMouseLeave={onMouseLeave}\n                className={'react-panel-search-list-item'}\n                style={{paddingLeft: (depth * resultsIdentation) + 'rem', paddingRight: resultsIdentation + 'rem'}}\n              >\n                {child.title}\n                {keywordResultElm}\n              </SearchButton>\n            )\n            elms.push(\n              <li\n                className={'react-panel-search-list-item-container'}\n                key={'search-' + child.title + child.id}\n              >\n                {resultElm}\n                {childList}\n              </li>\n            );\n          }\n        }\n      });\n      return elms;\n    }\n    [...levels, {level: null, data: topLevelItems}].forEach(({level, data}, i) => {\n      sortBy(data, ['name']).forEach((datum) => {\n        let keywordMatch: boolean;\n        let keywordResultElm: React.ReactNode | null;\n        if (datum.keywords && datum.keywords.length) {\n          const matchingKeywords = datum.keywords.filter(k => k.toLowerCase().includes(state.searchQuery.toLowerCase()));\n          const nonMatchingKeywords = datum.keywords.filter(k => !k.toLowerCase().includes(state.searchQuery.toLowerCase()));\n          keywordMatch = matchingKeywords.length !== 0;\n          keywordResultElm = matchingKeywordFormatter\n            ? matchingKeywordFormatter(matchingKeywords, nonMatchingKeywords) : null;\n        } else {\n          keywordMatch = false;\n          keywordResultElm = null;\n        }\n        if (!renderedIds.includes(datum.id) &&\n            (datum.title.toLowerCase().includes(state.searchQuery.toLowerCase()) || keywordMatch) && (\n              !maxResults || renderedIds.length < maxResults\n            )) {\n          renderedIds.push(datum.id);\n          let childElms: React.ReactElement<any>[] | null;\n          if (levels[i + 1] && levels[i + 1].data) {\n            childElms = getChildren(i + 1, datum.id, 1);\n          } else {\n            childElms = null;\n          }\n          const childList = childElms && childElms.length ? (\n            <ul\n              className={'react-panel-search-list-inner-container'}\n            >\n              {childElms}\n            </ul>\n          ) : null;\n          const onContinue = () => {\n            const targetIndex = levels.findIndex(target => target.level === level);\n            updateState({\n              ...state, level: levels[targetIndex + 1].level, parent: datum.id, \n              highlightedIndex: 0, selected: null, searchQuery: '',\n            })\n            if (onTraverseLevel !== undefined) {\n              onTraverseLevel(datum, Direction.desc);\n            }\n          }\n          const onSearch = () => {\n            selectDatum(datum)\n          }\n          const onMouseEnter = () => {\n            if (onHover) {\n              onHover(datum);\n            }\n          }\n          const resultElm = disallowSelectionLevels && disallowSelectionLevels.includes(level) ? (\n            <SearchButton\n              onClick={onContinue}\n              onMouseEnter={onMouseEnter}\n              onMouseLeave={onMouseLeave}\n              className={'react-panel-search-list-item traverse-only'}\n              style={{paddingLeft: resultsIdentation + 'rem', paddingRight: resultsIdentation + 'rem'}}\n            >\n              {datum.title}\n              {keywordResultElm}\n            </SearchButton>\n          ) : (\n            <SearchButton\n              onClick={onSearch}\n              onMouseEnter={onMouseEnter}\n              onMouseLeave={onMouseLeave}\n              className={'react-panel-search-list-item'}\n              style={{paddingLeft: resultsIdentation + 'rem', paddingRight: resultsIdentation + 'rem'}}\n            >\n              {datum.title}\n              {keywordResultElm}\n            </SearchButton>\n          )\n          filteredElms.push(\n            <li\n              className={'react-panel-search-list-item-container'}\n              key={'search-' + datum.title + datum.id}\n            >\n              {resultElm}\n              {childList}\n            </li>\n          );\n        }\n      });\n    });\n    if (filteredElms.length === 0) {\n      const noResultsText = noResultsFoundFormatter\n        ? noResultsFoundFormatter(state.searchQuery)\n        : `No results found for ${state.searchQuery}`;\n      filteredElms.push(\n        <li\n          className={'react-panel-search-list-item-container react-panel-search-list-no-results'}\n          key={'search-results-no-reasults-key'}\n        >\n          <NoResults>{noResultsText}</NoResults>\n        </li>\n      )\n    }\n    listOutput = (\n      <ul\n        className={'react-panel-search-list-root-container'}\n      >\n        {filteredElms}\n      </ul>\n    );\n  } else {\n    const targetIndex = levels.findIndex(({level}) => level === state.level);\n    const listItems = levels[targetIndex].data.filter(({parent_id}) => parent_id === state.parent).map(d => {\n      const onContinue = () => {\n        updateState({\n          ...state, level: levels[targetIndex + 1].level, parent: d.id, \n          highlightedIndex: 0,\n        })\n        if (onTraverseLevel !== undefined) {\n          onTraverseLevel(d, Direction.desc);\n        }\n      }\n      const onSearch = () => {\n        if (disallowSelectionLevels && disallowSelectionLevels.includes(levels[targetIndex].level)) {\n          onContinue();\n        } else {\n          selectDatum(d)\n        }\n      }\n      const ArrowButton = disallowSelectionLevels && disallowSelectionLevels.includes(levels[targetIndex].level)\n        ? TraverseOnlyButton\n        : NextButton;\n      const className = disallowSelectionLevels && disallowSelectionLevels.includes(levels[targetIndex].level)\n        ? 'react-panel-search-list-item traverse-only'\n        : 'react-panel-search-list-item';\n      const continueButton = targetIndex !== levels.length - 1 ? (\n        <ArrowButton\n          className={'react-panel-search-next-button'}\n          onClick={onContinue}\n          dangerouslySetInnerHTML={{__html: chevronSVG}}\n        />\n      ) : null;\n\n      const onMouseEnter = () => {\n        if (onHover) {\n          onHover(d);\n        }\n      }\n      const count = showCount && targetIndex !== levels.length - 1\n        ? `(${levels[targetIndex + 1].data.filter(({parent_id}) => parent_id === d.id).length})`\n        : null;\n      return (\n        <PanelItem\n          key={d.id}\n          className={'react-panel-search-panel-item-container'}\n        >\n          <PanelButton\n            onClick={onSearch}\n            className={className}\n            onMouseEnter={onMouseEnter}\n            onMouseLeave={onMouseLeave}\n          >{d.title} {count}</PanelButton> {continueButton}\n        </PanelItem>\n      );\n    });\n\n    let topLevelListItems: React.ReactElement | null;\n    if (topLevelItems.length && targetIndex === 0) {\n      const items = topLevelItems.map(d => {\n        const onMouseEnter = () => {\n          if (onHover) {\n            onHover(d);\n          }\n        }\n        return (\n          <PanelItem\n            key={d.id}\n            className={'react-panel-search-panel-item-container'}\n          >\n            <PanelButton\n              onClick={() => selectDatum(d)}\n              className={'react-panel-search-list-item'}\n              onMouseEnter={onMouseEnter}\n              onMouseLeave={onMouseLeave}\n            >\n              {d.title}\n            </PanelButton>\n          </PanelItem>\n        );\n      });\n      topLevelListItems = items.length ? (\n        <ul\n          className={'react-panel-search-panel-list-top-items-container'}\n        >\n          {items}\n        </ul>\n      ) : null;\n    } else {\n      topLevelListItems = null;\n    }\n\n    const parentDatum = parent === null || targetIndex === 0\n      ? undefined : levels[targetIndex - 1].data.find(({id}) => id === state.parent);\n\n    const titleText = topLevelTitle ? <span>{topLevelTitle}</span> : null;\n\n    const breadCrumb = !parentDatum ? (\n      <TitleOuter\n        className={'react-panel-search-current-tier-static-title-outer'}\n      >\n        <Title\n          className={'react-panel-search-current-tier-title'}\n        >\n          {titleText}\n        </Title>\n      </TitleOuter>\n    ) : (\n      <BreadCrumbOuter\n        className={'react-panel-search-current-tier-breadcrumb-outer'}\n      >\n        <Title\n          className={'react-panel-search-current-tier-title'}\n          onClick={() => {\n            updateState({\n              ...state,\n              level: levels[targetIndex - 1].level,\n              parent: parentDatum.parent_id,\n              highlightedIndex: 0,\n            });\n            if (onTraverseLevel !== undefined) {\n              onTraverseLevel(parentDatum, Direction.asc);\n            }\n          }}\n        >\n          <NavButton\n            className={'react-panel-search-previous-button'}\n            dangerouslySetInnerHTML={{__html: chevronSVG}}\n          />\n          <span\n            className={'react-panel-search-current-tier-text'}\n          >\n            {parentDatum.title}\n          </span>\n        </Title>\n      </BreadCrumbOuter>\n    )\n    listOutput = (\n      <React.Fragment>\n        {topLevelListItems}\n        {breadCrumb}\n        <ul\n          className={'react-panel-search-panel-list-root-container' + (topLevelListItems\n            ? 'react-panel-search-panel-list-has-top-level-items' : '')}\n        >\n            {listItems}\n        </ul>\n      </React.Fragment>\n    );\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.which === 40 || e.keyCode === 40) {\n      updateState({...state, highlightedIndex: state.highlightedIndex + 1})\n    } else if (e.which === 38 || e.keyCode === 38) {\n      updateState({...state, highlightedIndex: state.highlightedIndex - 1})\n    } else if (e.which === 13 || e.keyCode === 13) { \n      const node = resultsRef.current;\n      if (node) {\n        const highlightedElm = node.querySelector<HTMLButtonElement>('li .react-panel-search-highlighted-item');\n        if (highlightedElm) {\n          highlightedElm.click();\n          if (!highlightedElm.classList.contains('traverse-only')) {\n            const focusedInput = document.activeElement as HTMLElement;\n            if (focusedInput) {\n              focusedInput.blur();\n            }\n          }\n        }\n      }\n    }\n  }\n\n  const searchResults = state.isOpen ? (\n    <SearchResults\n      ref={resultsRef}\n      className={'react-panel-search-search-results'}\n    >\n      {listOutput}\n    </SearchResults>\n  ) : null;\n\n  const selectedClass = state.selected ? ' react-panel-search-has-selection' : '';\n\n  return (\n    <Container\n      ref={rootRef}\n      className={'react-panel-search-root-container' + selectedClass}\n      style={{zIndex: state.isOpen ? 2000 : undefined}}\n    >\n      <SearchBar\n        className={'react-panel-search-search-bar'}\n      >\n        <StandardSearch\n          placeholder={state.selected ? state.selected.title : defaultPlaceholderText}\n          setSearchQuery={val => updateState({\n            ...state,\n            searchQuery: val,\n            level: levels[0].level,\n            parent: null,\n            highlightedIndex: 0,\n          })}\n          initialQuery={''}\n          onClear={clearSearch}\n          hasSelection={state.selected ? true : false}\n          neverEmpty={neverEmpty}\n          handleKeyDown={handleKeyDown}\n          onFocus={() => updateState({...state, isOpen: true})}\n          isOpen={state.isOpen}\n          setIsOpen={(isOpen) => updateState({...state, isOpen})}\n          focusOnRender={focusOnRender}\n        />\n      </SearchBar>\n      {searchResults}\n    </Container>\n  );\n}\n","import { debounce } from 'lodash';\nimport React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components/macro';\nimport {usePrevious} from 'react-use';\nimport raw from 'raw.macro';\n\nconst magnifyingGlassSVG = raw('../assets/magnifying-glass.svg');\nconst chevronSVG = raw('../assets/chevron.svg');\n\nconst SearchContainer = styled.label`\n  position: relative;\n  display: flex;\n`;\n\nconst magnifyingGlassSize = 1.5; // in rem\nconst magnifyingGlassSpacing = 0.5; // in rem\n\nconst SearchIcon = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  margin: auto ${magnifyingGlassSpacing}rem;\n  width: ${magnifyingGlassSize}rem;\n  cursor: pointer;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    path {\n      fill: gray;\n    }\n  }\n`;\n\nconst SearchBar = styled.input<{$hasSelection: boolean}>`\n  width: 100%;\n  box-sizing: border-box;\n  padding: 0.5rem 0.5rem 0.5rem ${magnifyingGlassSize + (magnifyingGlassSpacing * 2)}rem;\n  box-sizing: border-box;\n  border: solid 1px #dfdfdf;\n  font-size: 1.2rem;\n  font-weight: 300;\n\n  ${({$hasSelection}) => $hasSelection ? (\n    `&::placeholder {\n      color: rgb(0, 0, 0);\n    }`\n  ) : ''}\n\n  &:focus {\n    &::placeholder {\n      color: rgb(255, 255, 255);\n    }\n  }\n`;\n\nconst DropDownIcon = styled.div`\n  position: absolute;\n  top: 3px;\n  bottom: 3px;\n  right: 2px;\n  padding: 0 0.4rem;\n  background-color: #fff;\n  border: none;\n  width: ${magnifyingGlassSize}rem;\n  cursor: pointer;\n\n  svg {\n    width: 100%;\n    height: 100%;\n\n    polyline {\n      stroke: gray;\n      stroke-width: 0.6px;\n    }\n  }\n`;\n\nconst ClearButton = styled.button`\n  position: absolute;\n  top: 2px;\n  bottom: 2px;\n  right: 2px;\n  line-height: 0;\n  font-size: 1.2rem;\n  padding: 0.4rem;\n  text-transform: uppercase;\n  text-align: center;\n  color: #696969;\n  background-color: #fff;\n  border: none;\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n\n  &:hover {\n    color: #908d8d;\n    cursor: pointer;\n  }\n`;\n\ninterface Props {\n  placeholder: string;\n  setSearchQuery: (value: string) => void;\n  initialQuery: string;\n  onClear: () => void;\n  hasSelection: boolean;\n  handleKeyDown: (event: React.KeyboardEvent) => void;\n  onFocus: () => void;\n  neverEmpty: boolean;\n  type?: string;\n  isOpen: boolean;\n  setIsOpen: (value: boolean) => void;\n  focusOnRender: boolean;\n}\n\nconst StandardSearch = (props: Props) => {\n  const {\n    placeholder, setSearchQuery, initialQuery, type, onClear, hasSelection, handleKeyDown, onFocus,\n    neverEmpty, focusOnRender,\n    isOpen, setIsOpen,\n  } = props;\n\n  const previousPlaceholder = usePrevious(placeholder);\n\n  const searchEl = useRef<HTMLInputElement | null>(null);\n  const clearEl = useRef<HTMLButtonElement | null>(null);\n  const dropdownEl = useRef<HTMLDivElement | null>(null);\n\n  const onChange = debounce(() => {\n    if (searchEl !== null && searchEl.current !== null) {\n      setSearchQuery(searchEl.current.value);\n      if (clearEl && clearEl.current) {\n        clearEl.current.style.display = !neverEmpty && (searchEl.current.value.length || hasSelection)\n          ? 'block'\n          : 'none';\n      }\n      if (dropdownEl && dropdownEl.current) {\n        dropdownEl.current.style.display = !neverEmpty && (searchEl.current.value.length || hasSelection)\n          ? 'none'\n          : 'block';\n      }\n    }\n  }, 400);\n\n  const clearSearch = () => {\n    if (searchEl !== null && searchEl.current !== null) {\n      searchEl.current.value = '';\n      searchEl.current.focus();\n      setSearchQuery(searchEl.current.value);\n      onClear();\n    }\n    if (clearEl && clearEl.current && !neverEmpty) {\n      clearEl.current.style.display = 'none';\n    }\n    if (dropdownEl && dropdownEl.current) {\n      dropdownEl.current.style.display = 'block';\n    }\n  };\n\n  useEffect(() => {\n    const node = searchEl.current;\n    if (node) {\n      if (!node.value) {\n        node.value = initialQuery;\n      }\n      if (clearEl && clearEl.current) {\n        clearEl.current.style.display = !neverEmpty && (node.value.length || hasSelection) ? 'block' : 'none';\n      }\n      if (dropdownEl && dropdownEl.current) {\n        dropdownEl.current.style.display = !neverEmpty && (node.value.length || hasSelection) ? 'none' : 'block';\n      }\n      if (node.value && hasSelection && previousPlaceholder !== placeholder) {\n        node.value = '';\n      }\n    }\n  }, [searchEl, initialQuery, hasSelection, placeholder, previousPlaceholder]);\n\n  useEffect(() => {\n    if (focusOnRender && searchEl && searchEl.current) {\n      searchEl.current.focus();\n    }\n  }, [focusOnRender, searchEl])\n\n  const closeDropdown = (e: React.MouseEvent) => {\n    if (isOpen) {\n      e.preventDefault();\n      e.stopPropagation();\n      (document.activeElement as HTMLElement).blur();\n      setIsOpen(false)\n    }\n  }\n\n  return (\n    <SearchContainer\n      className={'react-panel-search-search-bar-container'}\n    >\n      <SearchIcon\n        className={'react-panel-search-search-bar-search-icon'}\n        dangerouslySetInnerHTML={{__html: magnifyingGlassSVG}}\n      />\n      <SearchBar\n        className={'react-panel-search-search-bar-input'}\n        ref={searchEl}\n        type={type ? type : 'text'}\n        placeholder={placeholder}\n        onChange={onChange}\n        autoComplete={'off'}\n        $hasSelection={hasSelection}\n        onKeyDown={handleKeyDown}\n        onFocus={onFocus}\n      />\n      <ClearButton\n        className={'react-panel-search-search-bar-clear-button'}\n        ref={clearEl}\n        style={{\n          display: 'none',\n          marginRight: type === 'number' ? '1rem' : undefined,\n        }}\n        onClick={clearSearch}\n      >\n        ×\n      </ClearButton>\n      <DropDownIcon\n        ref={dropdownEl}\n        className={'react-panel-search-search-bar-dropdown-arrow'}\n        style={{\n          display: 'block',\n          transform: isOpen ? 'rotate(180deg)' : undefined,\n        }}\n        dangerouslySetInnerHTML={{__html: chevronSVG}}\n        onClick={closeDropdown}\n      />\n    </SearchContainer>\n  );\n};\n\nexport default StandardSearch;\n","import React from 'react'\nimport sortBy from 'lodash/sortBy';\nimport Root, {Direction} from './components/Root';\n\n// Singular datum\nexport interface Datum {\n  id: number | string;\n  title: string;\n  // levels can be either numbers or strings,\n  // order is based on value high-to low then\n  // alphabetical A-Z\n  level: number | string | null;\n  // all data points are expected to have the\n  // same hierarchy.\n  // i.e. grandparent -> parent -> child\n  // NOT  grandparent -> child\n  // when searching for an elements parent,\n  // it will traverse one level back up the\n  // level tree. Top level parent must have a\n  // parent_id of null\n  parent_id: number | string | null;\n  // optional keywords will also be searched\n  keywords?: string[];\n}\n\n// Levels are groupings of all datum\n// within the same level hierarchy\nexport interface Level {\n  // each level is identified by it's unique\n  // level taken from the provided data\n  level: Datum['level'];\n  // each level contains a group of all the given\n  // data at that level\n  data: Datum[];\n}\n\ninterface Props {\n  data: Datum[];\n  topLevelTitle?: string;\n  onSelect?: (value: Datum | null) => void;\n  onHover?: (value: Datum | null) => void;\n  onTraverseLevel?: (value: Datum, direction: Direction) => void;\n  selectedValue?: Datum | null;\n  disallowSelectionLevels?: Level['level'][];\n  defaultPlaceholderText?: string;\n  showCount?: boolean;\n  resultsIdentation?: number;\n  neverEmpty?: boolean;\n  maxResults?: number;\n  focusOnRender?: boolean;\n  noResultsFoundFormatter?: (value: string) => string;\n  matchingKeywordFormatter?: (matched: string[], rest: string[]) => React.ReactNode;\n  onClose?: () => void;\n}\n\nconst PanelSearch = (props: Props) => {\n  const {\n    data, onSelect, onHover, selectedValue, topLevelTitle, disallowSelectionLevels,\n    onTraverseLevel, defaultPlaceholderText, showCount, resultsIdentation, neverEmpty,\n    maxResults, focusOnRender, noResultsFoundFormatter, matchingKeywordFormatter, onClose,\n  } = props;\n  const topLevelItems: Datum[] = [];\n  const levels: Level[] = [];\n  sortBy(data, ({title}) => title.toLowerCase()).forEach(datum => {\n    if (datum.level !== null) {\n      let targetIndex = levels.findIndex(({level}) => level === datum.level);\n      if (targetIndex === -1) {\n        levels.push({\n          level: datum.level,\n          data: [datum],\n        })\n      } else {\n        levels[targetIndex].data.push(datum);\n      }\n    } else {\n      topLevelItems.push(datum)\n    }\n  });\n  if (levels && levels.length) {\n    const sortedLevels = sortBy(levels, ['level']);\n    return (\n      <Root\n        levels={sortedLevels}\n        topLevelItems={topLevelItems}\n        onSelect={onSelect}\n        onHover={onHover}\n        onTraverseLevel={onTraverseLevel}\n        selectedValue={selectedValue ? selectedValue : null}\n        topLevelTitle={topLevelTitle}\n        disallowSelectionLevels={disallowSelectionLevels}\n        defaultPlaceholderText={defaultPlaceholderText ? defaultPlaceholderText : 'Search'}\n        showCount={showCount ? showCount : false}\n        resultsIdentation={resultsIdentation !== undefined ? resultsIdentation : 1}\n        neverEmpty={neverEmpty ? neverEmpty : false}\n        maxResults={maxResults ? maxResults : null}\n        focusOnRender={focusOnRender ? focusOnRender : false}\n        noResultsFoundFormatter={noResultsFoundFormatter}\n        matchingKeywordFormatter={matchingKeywordFormatter}\n        onClose={onClose ? onClose : () => {}}\n      />\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default PanelSearch;\n","import React, {useState} from 'react';\nimport PanelSearch, {Datum} from 'react-panel-search';\n\nimport raw from 'raw.macro';\nimport styled from 'styled-components/macro';\n\nconst Root = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst PageTitle = styled.h1`\n  font-size: 1.4rem;\n  font-weight: 400;\n  text-align: center;\n  color: #444;\n  display: flex;\n  align-items: center;\n  max-width: 1000px;\n  margin-bottom: 3rem;\n`;\n\nconst ClearButton = styled.button`\n  padding: 0.4rem;\n  text-transform: uppercase;\n  background-color: #444;\n  border: none;\n  color: #fff;\n  text-align: center;\n  border-radius: 4px;\n  font-weight: 600;\n  font-size: 0.8rem;\n  margin-left: 0.8rem;\n  cursor: pointer;\n`;\n\nconst SearchContainer = styled.div`\n  width: 1000px;\n  max-width: 100%;\n`;\n\ninterface NaicsDatum {\n  naics_id: number;\n  naics_code: string;\n  title: string;\n  level: number;\n  parent_id: number | null;\n  parent_code: string | null;\n  code_hierarchy: string;\n  naics_id_hierarchy: string;\n}\n\nconst rawData: NaicsDatum[] = JSON.parse(raw('./naics_data.json'));\n\nconst App = () => {\n  const [selectedValue, setSelectedValue] = useState<Datum | null>(null);\n\n  const data: Datum[] = rawData.map((datum, i) => {\n    const keywords: string[] = [];\n\n    if (i === 5) {\n      keywords.push('Apple', 'Orange', 'Banana', 'Mango', 'Pear', 'Tangerine', 'Asparagus', 'Potato')\n    }\n    if (i === 645) {\n      keywords.push('Ford', 'Mustang', 'Hyundai', 'Subaru', 'Honda', 'Toyota', 'BMW', 'Tesla')\n    }\n    if (i === 800) {\n      keywords.push('Evergreen', 'Maple')\n    }\n    if (i === 48) {\n      keywords.push(datum.title)\n    }\n\n    return {\n      id: datum.naics_id,\n      title: datum.title,\n      level: datum.level,\n      parent_id: datum.parent_id,\n      keywords,\n    }\n  })\n\n  data.push({\n    id: 'top-level-industries-id',\n    title: 'Top Level Industries',\n    level: null,\n    parent_id: null,\n  },{\n    id: 'nearby-industries-id',\n    title: 'Nearby Industries',\n    level: null,\n    parent_id: null,\n  },)\n\n  const selectedText = selectedValue ? 'Selected: ' + selectedValue.title : 'Nothing selected';\n  const clearButton  = selectedValue\n    ? <ClearButton onClick={() => setSelectedValue(null)}>Clear</ClearButton>\n    : <ClearButton onClick={() => setSelectedValue(data[Math.floor(Math.random() * data.length)])}>Set value randomly</ClearButton>\n\n  const matchingKeywordFormatter = (match: string[], rest: string[]) => {\n    if (match.length || rest.length) {\n      return <div><small>Includes {[...match, ...rest].join(', ')}</small></div>\n    } else {\n      return null;\n    }\n  }\n\n  return (\n    <Root>\n      <PageTitle>{selectedText} {clearButton}</PageTitle>\n      <SearchContainer>\n        <PanelSearch\n          data={data}\n          topLevelTitle={'All Industries'}\n          disallowSelectionLevels={[2]}\n          onSelect={setSelectedValue}\n          selectedValue={selectedValue}\n          showCount={true}\n          resultsIdentation={1.75}\n          maxResults={500}\n          matchingKeywordFormatter={matchingKeywordFormatter}\n        />\n      </SearchContainer>\n    </Root>\n  );\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}